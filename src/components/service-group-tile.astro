---
import type { ServiceGroup } from '../data/services';
import ServiceTile from './service-tile.astro';
import CollapsibleHeader from './collapsible-header.astro';

interface Props {
    serviceGroup: ServiceGroup;
    groupId?: string;
}

const { serviceGroup, groupId } = Astro.props;
const collapseId = groupId || serviceGroup.name.toLowerCase().replace(/\s+/g, '-');
---

<div class="service-group-tile mb-4">
    <CollapsibleHeader 
        title={serviceGroup.name}
        shortDescription={serviceGroup.shortDescription}
        collapseId={collapseId}
        showLink={true}
        linkHref={`/services/${collapseId}`}
    />

    <div class="collapse show" id={collapseId}>
        <div class="row g-4">
            {serviceGroup.services.map((service) => (
                <div class="col-12 col-md-6">
                    <ServiceTile service={service} groupSlug={collapseId} />
                </div>
            ))}
        </div>
    </div>
</div>

<style>
    .service-group-tile {
        padding: 2rem 0;
        border-bottom: 1px solid var(--color-border);
    }

    .service-group-tile:last-child {
        border-bottom: none;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {

        .service-group-tile {
            padding: 1.5rem 0;
        }
    }
</style>
